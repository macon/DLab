<Window x:Class="DLab.Views.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DLab.Views"
        xmlns:infrastructure="clr-namespace:DLab.Infrastructure"
        xmlns:converters="clr-namespace:DLab.Converters"
        Title="ShellView"
        Height="300" Width="600" ShowInTaskbar="False" WindowStyle="ToolWindow" >
    
    <Window.Resources>
        <converters:BoolToHiddenConverter x:Key="BoolToHiddenConverter"/>
    </Window.Resources>

    <Window.Visibility>
        <Binding Path="IsHidden" Mode="TwoWay" Converter="{StaticResource BoolToHiddenConverter}"/>
    </Window.Visibility>

    <Window.InputBindings>
        <KeyBinding Key="Escape" Command="{x:Static local:CloseThisWindowCommand.Instance}" CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" />
    </Window.InputBindings>
    
    <DockPanel>
        <DockPanel.Resources>
            <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        </DockPanel.Resources>

        <infrastructure:NotifyIcon
			x:Name="notifyIcon"
			Text="Control Freak"
			Icon="pack://application:,,,/Dlab;component/Resources/ancore-26.png"
			BalloonTipText="Control Freak"
			BalloonTipTitle="Control Freak"
			BalloonTipIcon="Info"
			MouseDoubleClick="OnNotifyIconDoubleClick">
            <infrastructure:NotifyIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Command" Click="OnOpenClick" InputGestureText="Alt+Space" />
                    <MenuItem Header="Clipboard" Click="OnOpenClipboardClick" InputGestureText="Ctrl+Alt+C" />
                    <MenuItem Header="Exit" Click="OnExitClick" />
                </ContextMenu>
            </infrastructure:NotifyIcon.ContextMenu>
        </infrastructure:NotifyIcon>
        
        <WrapPanel DockPanel.Dock="Bottom">
            <Label Name="SystemStatus" Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}"></Label>
            <Button Name="Settings" Content="Settings" Width="80" Height="25" HorizontalAlignment="Right" />
        </WrapPanel>
        
        <ContentControl Name="TabViewModel"/>
    </DockPanel>
</Window>
