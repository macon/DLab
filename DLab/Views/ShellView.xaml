<Window x:Class="DLab.Views.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DLab.Views"
        xmlns:infrastructure="clr-namespace:DLab.Infrastructure"
        xmlns:converters="clr-namespace:DLab.Converters"
        Title="ShellView"
        Icon="pack://application:,,,/Dlab;component/Resources/robot-26.png"
        Height="300" Width="600" ShowInTaskbar="False"  >
    
    <Window.Resources>
        <converters:BoolToHiddenConverter x:Key="BoolToHiddenConverter"/>

<!--        <Style x:Key="TransparentStyle" TargetType="{x:Type Button}">-->
<!--            <Setter Property="Template">-->
<!--                <Setter.Value>-->
<!--                    <ControlTemplate TargetType="Button">-->
<!--                        <Border Background="Transparent">-->
<!--                            <ContentPresenter/>-->
<!--                        </Border>-->
<!--                    </ControlTemplate>-->
<!--                </Setter.Value>-->
<!--            </Setter>-->
<!--        </Style>-->
    </Window.Resources>

    <Window.Visibility>
        <Binding Path="IsHidden" Mode="TwoWay" Converter="{StaticResource BoolToHiddenConverter}"/>
    </Window.Visibility>

    <Window.InputBindings>
        <KeyBinding Key="Escape" Command="{x:Static local:CloseThisWindowCommand.Instance}" CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" />
    </Window.InputBindings>
    
    <DockPanel>
        <DockPanel.Resources>
            <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        </DockPanel.Resources>

        <infrastructure:NotifyIcon
			x:Name="notifyIcon"
			Text="Gadget"
			Icon="pack://application:,,,/Dlab;component/Resources/robot-26.png"
			BalloonTipText="Gadget"
			BalloonTipTitle="Gadget"
			BalloonTipIcon="Info"
			MouseDoubleClick="OnNotifyIconDoubleClick">
            <infrastructure:NotifyIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Command" Click="OnOpenClick" InputGestureText="Alt+Space" />
                    <MenuItem Header="Clipboard" Click="OnOpenClipboardClick" InputGestureText="Ctrl+Alt+C" />
                    <MenuItem Header="Dir" Click="OnOpenDirClick" InputGestureText="Ctrl+Alt+D" />
                    <MenuItem Header="Settings" Click="OnOpenSettingsClick" />
                    <MenuItem Header="Exit" Click="OnExitClick" />
                </ContextMenu>
            </infrastructure:NotifyIcon.ContextMenu>
        </infrastructure:NotifyIcon>
        
        <DockPanel DockPanel.Dock="Bottom">
            <Button Name="Settings" DockPanel.Dock="Right" Style="{StaticResource TransparentStyle}">
                <Image Source="pack://application:,,,/Dlab;component/Resources/settings2-26.png" Height="26" Width="26" Margin="3 3"></Image>
            </Button>
            <Label Name="SystemStatus" Visibility="{Binding IsBusy, Converter={StaticResource BoolToVis}}"></Label>
        </DockPanel>
        
        <ContentControl Name="TabViewModel"/>
    </DockPanel>
</Window>
